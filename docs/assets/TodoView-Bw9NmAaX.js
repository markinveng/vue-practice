import{d as T,_ as f,o as p,c,a as t,r as S,w as k,b as h,e as r,f as B,g as D,h as I,i as b,v as E,F as $,j as N,k as C,l as x,t as O}from"./index-DAayOR9H.js";const A=T({props:{isVisible:{type:Boolean,required:!0}},emits:["close"],methods:{close(){this.$emit("close")}}}),F={class:"modal_content"};function J(o,e,d,n,u,v){return o.isVisible?(p(),c("div",{key:0,class:"modal_overlay",onClick:e[0]||(e[0]=k((...a)=>o.close&&o.close(...a),["self"]))},[t("div",F,[S(o.$slots,"default",{},void 0)])])):h("",!0)}const L=f(A,[["render",J],["__scopeId","data-v-e6521f60"]]),U=T({components:{EditModal:L},setup(){const o=r([]),e=r(""),d=r(null),n=r(""),u=r(!1),v=()=>{const l=localStorage.getItem("todos");o.value=l?JSON.parse(l):[]},a=()=>{localStorage.setItem("todos",JSON.stringify(o.value))},s=()=>{e.value.trim()!==""&&(o.value.push({id:Date.now(),text:e.value,completed:!1}),e.value="",a())},m=l=>{o.value=o.value.filter(i=>i.id!==l),a()},M=l=>{d.value=l.id,n.value=l.text,u.value=!0},_=()=>{d.value=null,n.value="",u.value=!1},V=l=>{const i=o.value.find(g=>g.id===l);i&&(d.value=l,n.value=i.text)},w=()=>{d.value=null,n.value=""},y=()=>{const l=o.value.find(i=>i.id===d.value);l&&n.value.trim()!==""&&(l.text=n.value,d.value=null,n.value="",a(),_())};return B(v),D(o,a,{deep:!0}),{todos:o,newTodoText:e,editingTodoId:d,editTodoText:n,isEditModalVisible:u,addTodo:s,deleteTodo:m,editTodo:V,cancelEdit:w,openEditModal:M,closeEditModal:_,saveTodo:y}}}),W={class:"todo"},j={class:"todo_list"},q={class:"todo_itemWrapper"},z={class:"todo_text"},G={class:"todo_buttonWrapper"},H=["onClick"],K=["onClick"],P={class:"input"};function Q(o,e,d,n,u,v){const a=I("EditModal");return p(),c($,null,[t("form",{onSubmit:e[1]||(e[1]=k((...s)=>o.addTodo&&o.addTodo(...s),["prevent"])),class:"input"},[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.newTodoText=s),type:"text",class:"input_textArea",placeholder:"New Task"},null,512),[[E,o.newTodoText]]),e[5]||(e[5]=t("button",{type:"submit",class:"input_button"},"Add",-1))],32),t("div",W,[t("ul",j,[(p(!0),c($,null,N(o.todos,s=>(p(),c("li",{key:s.id,class:"todo_item"},[t("div",q,[t("p",z,O(s.text),1),t("div",G,[t("button",{onClick:m=>o.openEditModal(s),class:"todo_editButton"}," Edit ",8,H),t("button",{onClick:m=>o.deleteTodo(s.id),class:"todo_deleteButton"}," Del ",8,K)])])]))),128))])]),C(a,{isVisible:o.isEditModalVisible,onClose:o.closeEditModal},{default:x(()=>[e[6]||(e[6]=t("h3",{class:"modal_title"},"Edit Task",-1)),t("form",P,[b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.editTodoText=s),type:"text",placeholder:"Edit Task",class:"input_textArea"},null,512),[[E,o.editTodoText]]),t("button",{onClick:e[3]||(e[3]=(...s)=>o.saveTodo&&o.saveTodo(...s)),class:"input_button -done"},"Done")]),t("button",{onClick:e[4]||(e[4]=(...s)=>o.closeEditModal&&o.closeEditModal(...s)),class:"modal_close"},"Close")]),_:1},8,["isVisible","onClose"])],64)}const R=f(U,[["render",Q],["__scopeId","data-v-3bfe91b9"]]),X=T({__name:"TodoView",setup(o){return(e,d)=>(p(),c("main",null,[d[0]||(d[0]=t("h1",{class:"title"},"TODOアプリ",-1)),C(R)]))}}),Z=f(X,[["__scopeId","data-v-271e82b8"]]);export{Z as default};
